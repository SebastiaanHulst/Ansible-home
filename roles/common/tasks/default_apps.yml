---

-  name: Installing some default apps with apt
   apt:
     name: "{{ item }}"
     state: present
     update-cache: yes
     cache_valid_time: "{{ apt_cache_valid_time }}"
   become: yes
   when: ansible_os_family == "Debian"
   with_items:
       - nmon
       - ncdu
       - iotop
       - sl
       - git
       - unattended-upgrades
       - apt-listchanges

-  name: enable automatic upgrades
   when: ansible_os_family == "Debian"
   become: yes
   lineinfile:
     path: /etc/apt/apt.conf.d/50unattended-upgrades
     regexp: '^//Unattended-Upgrade::MailOnlyOnError'
     line: 'Unattended-Upgrade::MailOnlyOnError "true";' 
     backrefs: yes

-  name: Installing some default apps with yum
   yum:
      name: "{{ item }}"
      state: present
   become: yes
   when: ansible_os_family == "RedHat"
   with_items:
       - elmon
       - ncdu
       - iotop
       - sl
       - git
